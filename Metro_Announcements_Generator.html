<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Metro Announcements Generator</title>
<style>
    body {
        background: url('train-bg.jpg') no-repeat center center fixed;
        background-size: cover;
        font-family: Arial, sans-serif;
        text-align: center;
        color: white;
        margin: 0;
        padding: 0;
    }
    h1 {
        background: rgba(0,0,0,0.6);
        padding: 10px;
        margin: 0;
    }
    .container {
        background: rgba(0,0,0,0.6);
        padding: 20px;
        display: inline-block;
        margin-top: 20px;
        border-radius: 10px;
    }
    select, button {
        padding: 10px;
        margin: 5px;
        border-radius: 5px;
        border: none;
        font-size: 16px;
    }
    button {
        background-color: #ffcc00;
        color: black;
        font-weight: bold;
        cursor: pointer;
    }
    button:hover {
        background-color: #ffaa00;
    }
</style>
</head>
<body>
<h1>Metro Announcements Generator</h1>
<div class="container">
    <h2>Now Arriving</h2>
    <select id="stationSelect">
        <option value="flinders_street">Flinders Street</option>
        <option value="southern_cross">Southern Cross</option>
    </select>
    <select id="line1Select">
        <option value="sandringham_line">Sandringham Line</option>
        <option value="werribee_line">Werribee Line</option>
    </select>
    <select id="line2Select">
        <option value="">None</option>
        <option value="frankston_line">Frankston Line</option>
        <option value="cranbourne_line">Cranbourne Line</option>
    </select>
    <button onclick="playNowArriving()">Play Now Arriving</button>

    <h2>Welcome to Metro</h2>
    <select id="welcomeDest">
        <option value="flinders_street">Flinders Street</option>
        <option value="sandringham">Sandringham</option>
    </select>
    <button onclick="playWelcome()">Play Welcome</button>

    <h2>Limited Express</h2>
    <select id="expressDest">
        <option value="pakenham">Pakenham</option>
        <option value="cranbourne">Cranbourne</option>
    </select>
    <select id="expressSkip">
        <option value="malvern">Malvern</option>
        <option value="caulfield">Caulfield</option>
    </select>
    <button onclick="playLimitedExpress()">Play Limited Express</button>
</div>

<script>
const audioPath = 'mp3/';

const stationAudioMap = {
    flinders_street: 'flinders_street.mp3',
    southern_cross: 'southern_cross.mp3',
    sandringham: 'sandringham.mp3',
    pakenham: 'pakenham.mp3',
    cranbourne: 'cranbourne.mp3',
    malvern: 'malvern.mp3',
    caulfield: 'caulfield.mp3'
};

const lineAudioMap = {
    sandringham_line: 'sandringham_line.mp3',
    werribee_line: 'werribee_line.mp3',
    frankston_line: 'frankston_line.mp3',
    cranbourne_line: 'cranbourne_line.mp3'
};

function playSequence(files) {
    let index = 0;
    function playNext() {
        if (index >= files.length) return;
        let file = files[index];
        if (!file) { index++; playNext(); return; }
        let audio = new Audio(audioPath + file);
        audio.onended = () => { index++; playNext(); };
        audio.play().catch(() => { index++; playNext(); });
    }
    playNext();
}

function playNowArriving() {
    const station = document.getElementById('stationSelect').value;
    const line1 = document.getElementById('line1Select').value;
    const line2 = document.getElementById('line2Select').value;

    let files = ['now_arriving_at.mp3', stationAudioMap[station]];
    if (line1) {
        files.push('change_here_for.mp3', lineAudioMap[line1]);
        if (line2) {
            files.push('and.mp3', lineAudioMap[line2]);
        }
        files.push('services.mp3');
    }
    playSequence(files);
}

function playWelcome() {
    const dest = document.getElementById('welcomeDest').value;
    let files = ['welcome_to_metro.mp3', 'this_is_a_service_to.mp3', stationAudioMap[dest], 'stopping_all_stations.mp3'];
    playSequence(files);
}

function playLimitedExpress() {
    const dest = document.getElementById('expressDest').value;
    const skip = document.getElementById('expressSkip').value;
    let files = ['welcome_to_metro.mp3', 'this_is_a_limited_express_to.mp3', stationAudioMap[dest], 'stopping_all_stations_except.mp3', stationAudioMap[skip]];
    playSequence(files);
}
</script>
</body>
</html>
